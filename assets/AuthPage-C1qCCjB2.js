import{Q as E}from"./QPage-Dn0-khzQ.js";import{A as R,r as x,aQ as I,K as L,L as k,o as M,h as $,B as D,g as j,aW as K,a0 as w,H as N,aq as O,aX as U,c as H,m as A,n as F,p,f as l,aY as B,t as T,aM as W,aZ as X,a_ as P,a$ as Y,v as Q,b0 as Z}from"./index-Cluau6P8.js";import{a as z}from"./axios-upsvKRUO.js";const G=R({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(a,{slots:u,emit:i}){const g=j(),c=x(null);let d=0;const n=[];function v(e){const m=typeof e=="boolean"?e:a.noErrorFocus!==!0,y=++d,S=(t,o)=>{i(`validation${t===!0?"Success":"Error"}`,o)},C=t=>{const o=t.validate();return typeof o.then=="function"?o.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:o,comp:t})};return(a.greedy===!0?Promise.all(n.map(C)).then(t=>t.filter(o=>o.valid!==!0)):n.reduce((t,o)=>t.then(()=>C(o).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return y===d&&S(!0),!0;if(y===d){const{comp:o,err:r}=t[0];if(r!==void 0&&console.error(r),S(!1,o),m===!0){const V=t.find(({comp:q})=>typeof q.focus=="function"&&K(q.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function s(){d++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function f(e){e!==void 0&&w(e);const m=d+1;v().then(y=>{m===d&&y===!0&&(a.onSubmit!==void 0?i("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&w(e),i("reset"),N(()=>{s(),a.autofocus===!0&&a.noResetFocus!==!0&&b()})}function b(){O(()=>{if(c.value===null)return;const e=c.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(c.value.querySelectorAll("[tabindex]"),m=>m.tabIndex!==-1);e?.focus({preventScroll:!0})})}I(U,{bindComponent(e){n.push(e)},unbindComponent(e){const m=n.indexOf(e);m!==-1&&n.splice(m,1)}});let _=!1;return L(()=>{_=!0}),k(()=>{_===!0&&a.autofocus===!0&&b()}),M(()=>{a.autofocus===!0&&b()}),Object.assign(g.proxy,{validate:v,resetValidation:s,submit:f,reset:h,focus:b,getValidationComponents:()=>n}),()=>$("form",{class:"q-form",ref:c,onSubmit:f,onReset:h},D(u.default))}}),J={class:"text-h6 text-center"},ee={__name:"AuthForm",setup(a){const u=x(!0),i=x(""),g=x("");function c(){u.value=!u.value}async function d(){try{const v=u.value?"/login":"/register",s={email:i.value,password:g.value},f=await z.post(v,s);console.log(f.data)}catch(v){console.log(v)}}const n=H(()=>u.value?"Switch to Register":"Switch to Login");return(v,s)=>(A(),F(Z,{class:"q-pa-md"},{default:p(()=>[l(B,null,{default:p(()=>[T("div",J,W(u.value?"Login":"Register"),1)]),_:1}),l(G,{onSubmit:X(d,["prevent"])},{default:p(()=>[l(B,{class:"q-gutter-md"},{default:p(()=>[l(P,{filled:"",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=f=>i.value=f),type:"email",label:"Email",required:""},null,8,["modelValue"]),l(P,{filled:"",modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=f=>g.value=f),type:"password",label:"Password",required:""},null,8,["modelValue"])]),_:1}),l(Y,{align:"between"},{default:p(()=>[l(Q,{color:"primary",label:"Submit",type:"submit"}),l(Q,{flat:"",label:n.value,onClick:c},null,8,["label"])]),_:1})]),_:1})]),_:1}))}},se={__name:"AuthPage",setup(a){return(u,i)=>(A(),F(E,{class:"flex flex-center"},{default:p(()=>[l(ee)]),_:1}))}};export{se as default};
